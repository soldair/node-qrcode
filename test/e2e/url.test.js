var test = require('tap').test
var QRCode = require('../../')

var shouldBe =
'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIwAAACMCAYAAACuwEE+AAADy0lEQVR4Ae3BQW4kBwwEwSxi/v/ltI48NUxoNFqvKyJ+oepfGqoOhqqDoepgqDoYqg6GqoOh6mCoOhiqDoaqg6HqYKg6GKoOhqqDoepgqDoYqg6GqoOh6uDFmyXhk1S2JGwq35GETeVJEjaVLQmfpPJOQ9XBUHUwVB28+GEq75SEd0rCE5UnSfgOlXdKwk8aqg6GqoOh6uDFhyXhQuVCZUvCprKpPEnCE5V3SsKFyicNVQdD1cFQdfDiL5OETWVLwqbyRGVLwpaEJyp/k6HqYKg6GKoOXvzlkvAdSdhU/s+GqoOh6mCoOnjxYSq/SeVJEjaVT1L5kw1VB0PVwVB18OKHJeE3qWxJ2FQukrCpbEnYVJ4k4b9kqDoYqg6GqoP4hf+RJGwqT5LwROX/ZKg6GKoOhqqDF78sCZvKkyRsKk+SsKlsSXiisiVhS8ITlSdJuFDZkvBE5Z2GqoOh6mCoOnjxZknYVLYkfIfKO6lsSbhQ2ZKwJeGJypMk/EmGqoOh6mCoOnjxZipPVLYkPEnCE5UtCZvKn0Tlv2yoOhiqDoaqg/iFH5SEJypbEjaVJ0n4DpXvSMKm8iQJm8p/yVB1MFQdDFUHL94sCZvKhcqWhCcqT5KwqWxJ2FS2JGwqm8qTJHxSEjaVdxqqDoaqg6HqIH7hFyXhicpFEjaVLQmbypaEd1LZkvBE5SIJT1Teaag6GKoOhqqDF2+WhE3licpFEi6SsKlcqHxHEjaViyT8SYaqg6HqYKg6iF/4QUnYVLYkbCpbEjaVLQlPVLYkbCpPkrCpbEnYVC6SsKlsSdhUftNQdTBUHQxVBy/eLAnfkYRNZUvCE5UtCRdJuFDZkvAdSdhUtiRsKp80VB0MVQdD1UH8wl8kCU9UtiRsKlsSNpUtCU9ULpLwROVJEjaVdxqqDoaqg6Hq4MWbJeGTVDaVd1J5orIl4UkSNpUnKlsSftNQdTBUHQxVBy9+mMo7JeEiCU9UniThicqFyk9S+UlD1cFQdTBUHbz4sCRcqHyHypaELQmbykUSniThnVR+01B1MFQdDFUHL/4ySXiisiVhS8KmsiXhO1SeJGFLwqayJWFT+UlD1cFQdTBUHbz4y6hcqGxJeCeVn6SyJWFTeaeh6mCoOhiqDl58mMonJeGTVC6S8E4qP2moOhiqDoaqgxc/LAm/SeVJEp4kYVN5koQLlS0Jm8qTJDxReaeh6mCoOhiqDuIXqv6loepgqDoYqg6GqoOh6mCoOhiqDoaqg6HqYKg6GKoOhqqDoepgqDoYqg6GqoOh6mCoOhiqDv4BAxCOIT7uvsQAAAAASUVORK5CYII='

var lShouldBe = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAACzklEQVR4Ae3BQW7jUAwFwX6E7n/lnlly9QHBspOYrIr/scYo1ijFGqVYoxRrlGKNUqxRijVKsUYp1ijFGqVYoxRrlGKNUqxRijVKsUYp1ijFGqVYo1w8LAmfpHJHEjqVLgmdSpeET1J5UrFGKdYoxRrl4s1UnpSEV6g8SeVJSXinYo1SrFGKNcrFhyXhDpU7ktCpdEnoVDqVVyThDpVPKtYoxRqlWKNcfBmVE5WTJHQq36RYoxRrlGKNcvHlktCpdEmYpFijFGuUYo1y8WEqPykJJyqvUPnNijVKsUYp1igXb5aET0pCp9IloVPpktCpnCThLynWKMUapVijXDxM5S9TOVH5y4o1SrFGKdYoFw9Lwh0qXRJ+UhLuULkjCZ3KJxVrlGKNUqxRLh6m0iWhU+mS0Kl0SehUuiS8IgmdSpeETuUkCScqXRJOVJ5UrFGKNUqxRrn4ZZLQqXRJ6FROktCpdEk4UemScIdKl4ROpUvCOxVrlGKNUqxRLj4sCZ1Kl4QTlXdKQqfSqXRJ6FROVE5U3qlYoxRrlGKNcvFhKnck4USlS0KncofKHSpdEjqV36RYoxRrlGKNEv/jiyThFSonSXiFSpeEE5UnFWuUYo1SrFEuHpaET1I5UbkjCScqJ0k4ScJPKtYoxRqlWKNcvJnKk5JwRxJOVDqVV6jckYRO5Z2KNUqxRinWKBcfloQ7VJ6kcpKETuWOJHQqv0mxRinWKMUa5eLLqHRJ6JLwiiS8Igk/qVijFGuUYo1y8WWScKJykoQTlS4JJ0k4UemS0Kk8qVijFGuUYo1y8WEqn6TSJaFT6VReodIloVPpktCpvFOxRinWKMUa5eLNkvCbqNyRhE6lU+mS0KnckYRO5UnFGqVYoxRrlPgfa4xijVKsUYo1SrFGKdYoxRqlWKMUa5RijVKsUYo1SrFGKdYoxRqlWKMUa5RijVKsUYo1yj9lRRH6suVmrQAAAABJRU5ErkJggg=='

test('qrcode to data uri should be correct.', function (t) {
  QRCode.toDataURL('i am a pony!', function (err, url) {
    if (err) console.log(err)
    t.ok(!err, 'there should be no error ' + err)
    t.equals(url, shouldBe, 'url generated should match expected value')
    t.end()
  })
})

test('qrcode generated with changed error correction should be expected value', function (t) {
  QRCode.toDataURL('i am a pony!', {errorCorrectLevel: 'minimum'}, function (err, url) {
    t.ok(!err, 'there should be no error ' + err)
    t.equals(url, lShouldBe, 'url should match expected value for error correction L')
    t.end()
  })
})
